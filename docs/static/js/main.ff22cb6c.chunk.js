(this.webpackJsonptetris=this.webpackJsonptetris||[]).push([[0],{11:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r(4),a=r.n(c),u=(r(9),r(2));var o=[{shape:[{x:0,y:0},{x:0,y:1},{x:1,y:0},{x:1,y:1}],width:2,height:2,rotate:!1},{shape:[{x:0,y:0},{x:0,y:1},{x:0,y:2},{x:0,y:3}],width:1,height:4},{shape:[{x:0,y:0},{x:0,y:1},{x:0,y:2},{x:1,y:2}],width:1,height:3}];function i(){return o[Math.floor(Math.random()*o.length)]}var s=10;function f(e,t,r){var n=e;return t.shape.forEach((function(e){var t=e.x+r.x,c=e.y+r.y;t<0||c<0||t>=s||c>=20||(n=function(e,t,r,n){if(e[r][t]===n)return e;var c=e.slice();return c[r]=e[r].slice(),c[r][t]=n,c}(n,t,c,1))})),n}function j(){var e=Object(n.useState)((function(){return Array.from(Array(20),(function(){return Array(s).fill(0)}))})),t=Object(u.a)(e,2),r=t[0],c=t[1],a=Object(n.useState)((function(){return i()})),o=Object(u.a)(a,2),j=o[0],l=o[1],b=Object(n.useState)({x:0,y:0}),h=Object(u.a)(b,2),x=h[0],O=h[1],v=Object(n.useState)((function(){return f(r,j,x)})),y=Object(u.a)(v,2),p=y[0],d=y[1],m=Object(n.useState)(0),w=Object(u.a)(m,2),g=w[0],k=w[1];function A(e,t){var r={x:e+x.x,y:t+x.y};return!!E(r,j)&&(O(r),!0)}function E(e,t){return t.shape.every((function(t){var n=t.x+e.x,c=t.y+e.y;return!(n<0||n>=s)&&(!(c<0||c>=20)&&0===r[c][n])}))}return Object(n.useEffect)((function(){var e=f(r,j,x);d(e)}),[r,j,x]),Object(n.useEffect)((function(){for(var e=function(e){return e.map((function(e){return e.slice()}))}(r),t=!1,n=function(r){for(var n=r;n>0;n--)for(var c=0;c<9;c++)e[n][c]=e[n-1][c];for(var a=0;a<9;a++)e[0][a]=0;t=!0,k((function(e){return e+1e3}))},a=0;a<20;a++){for(var u=!1,o=0;o<9;o++)if(0===e[a][o]){u=!0;break}u||n(a)}t&&c(e)}),[r]),function(e,t){var r=Object(n.useRef)();Object(n.useEffect)((function(){r.current=e}),[e]),Object(n.useEffect)((function(){var e=setInterval((function(){return r.current()}),t);return function(){return clearInterval(e)}}),[t])}((function(){A(0,1)||(c(f(r,j,x)),l(i()),O({x:0,y:0}))}),600),[p,g,function(e){switch(e.key){case"ArrowRight":A(1,0),e.preventDefault();break;case"ArrowLeft":A(-1,0),e.preventDefault();break;case"ArrowDown":A(0,1),e.preventDefault();break;case"ArrowUp":!function(){var e=Math.floor(j.width/2),t=Math.floor(j.height/2),r={shape:j.shape.map((function(r){var n=r.x,c=r.y,a=-(c-=t),u=n-=e;return{x:a+=e,y:u+=t}})),width:j.width,height:j.height};E(x,r)&&l(r)}(),e.preventDefault()}}]}var l=r(1),b=function(){var e=j(),t=Object(u.a)(e,3),r=t[0],c=t[1],a=t[2],o=Object(n.useRef)();return Object(n.useEffect)((function(){o.current.focus()}),[]),Object(l.jsxs)("div",{ref:o,className:"t-board",tabIndex:0,onKeyDown:a,children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("span",{className:"t-score-label",children:"Score:"}),Object(l.jsx)("span",{className:"t-score-label",children:c.toLocaleString()})]}),r.map((function(e,t){return Object(l.jsx)(h,{row:e},t)}))]})},h=Object(n.memo)((function(e){return Object(l.jsx)("span",{className:"t-row",children:e.row.map((function(e,t){return Object(l.jsx)(x,{cell:e},t)}))})})),x=Object(n.memo)((function(e){Object(n.useRef)(0).current++;var t=e.cell?e.cell:0;return Object(l.jsx)("span",{className:"t-cell t-cell-".concat(t)})})),O=Object(n.memo)(b);function v(){return Object(l.jsx)("div",{className:"t-parent",children:Object(l.jsx)(O,{})})}a.a.render(Object(l.jsx)(v,{}),document.getElementById("root"))},9:function(e,t,r){}},[[11,1,2]]]);
//# sourceMappingURL=main.ff22cb6c.chunk.js.map